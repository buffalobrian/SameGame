<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>The SameGame</title>
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- Popper JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-md bg-dark navbar-dark">
    <!-- Brand -->
    <a class="navbar-brand" href="index.html">TEAM 8</a>

    <!-- Toggler/collapsibe Button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar links -->
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="SameGame.html">SameGame</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="snake.html">Snake</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="puzzle.html">Puzzle</a>
        </li>
      </ul>
    </div>
  </nav>
  <div id="container"></div>

  <script type="text/babel">

  function getCursorPosition(canvas) {
	var  rect = canvas.getBoundingClientRect();
	var x = event.clientX - rect.left;
	var y = event.clientY - rect.top;
	console.log("x: " + x + "y: " + y);
  }

  function rect(props) {
	const {ctx, x, y, width, height} = props;
	ctx.fillStyle = "white";
	ctx.fillRect(x, y, width, height);
	ctx.fillStyle = props.color;
	ctx.fillRect(x+1, y+1, width-2, height-2);
  }

  class SameGameBoard extends React.Component {
  
	constructor(props, context) {
		super(props, context);

		this.state = {
			board: [], // empty array will be filled with 16x16 empty spaces
			snake: [[8,4]], // a list of coordinates for each part of snake [y,x]
			direction: 'E', // direction is N (-x), E (+y), S (+x), or W (-y)
			gameOver: false,
			score: 0, // +10 for each 'apple' eaten
			colors: ["black", "white", "red"] // white is snake, red is apple, black is nothing
		}

		this.init = this.init.bind(this);
		
		this.init(this.state.board);
		setInterval(this.tick, 200);
	}
	
	//fills board with black squares (value of 0) and the middle square will be white and a random square will be red
	init(arr) {
		for (var i=0;i<16;i++) {
			arr[i] = [];
		}
		for (var i =0; i<16; i++ ){
			for (var j =0; j<16; j++ ){
				arr[i][j] = 0;
			}
		}
		arr[this.state.snake[0][0]][this.state.snake[0][1]] = 1;
	}

	refresh(e) {
		this.setState({
			gameOver: false,
			score: 0,
			lastamount: 0
		});
		initArray(this.state.gameMode, this.state.board);
	}

	componentDidMount() {
		this.updateCanvas();
	}

	componentDidUpdate() {
		this.updateCanvas();
	}

	updateCanvas() {
		const ctx = this.refs.canvas.getContext('2d');
		
		//draw board with appropriate colors (no game logic here)
		for(var col = 0; col < this.state.board.length; col++) {
			for(var row = 0; row < this.state.board[col].length; row++) {
				if(this.state.board[col][row] != -1) {
					rect( {ctx, x: 25*row, y: 25*col, width: 25, height: 25, color: this.state.colors[this.state.board[col][row]]} );
				} else {
					rect( {ctx, x: 25*row, y: 25*col, width: 25, height: 25, color: "black"} );
				}
			}
		}

	}

	render() {
		var style = {
			border: "1px solid black"
		}

		return (
			<div>
				<canvas id="canvas" onKeyPress={this.findMatch} width={400} height={400} ref ="canvas" style={style}></canvas>
				<p>Score: {this.state.score}</p>
				<button onClick={this.refresh}>Refresh</button>
			</div>
		);
	}
  }

  ReactDOM.render(
    <div>
	  <h1>The SameGame</h1>
      <SameGameBoard/>
    </div>,
    document.querySelector("#container")
  );

  </script>


</body>

</html>
